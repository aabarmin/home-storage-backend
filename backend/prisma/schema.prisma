generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Flat {
  id         Int          @id @default(autoincrement())
  title      String
  alias      String       @unique
  Device     Device[]
  DataRecord DataRecord[]

  @@map("flats")
}

model Device {
  id           Int          @id @default(autoincrement())
  title        String
  alias        String       @unique
  flatId       Int          @map("flat_id")
  flat         Flat         @relation(fields: [flatId], references: [id])
  needReadings Boolean      @default(false) @map("need_readings")
  needReceipts Boolean      @default(false) @map("need_receipts")
  needInvoices Boolean      @default(false) @map("need_invoices")
  DataRecord   DataRecord[]

  @@map("devices")
}

model FileInfo {
  fileId   Int    @id @default(autoincrement()) @map("id")
  fileName String @map("file_name")
  fileType String @map("file_type")
  filePath String @map("file_path")

  @@map("files")
}

model DataRecord {
  id            Int      @id @default(autoincrement())
  flatId        Int      @map("flat_id")
  flat          Flat     @relation(fields: [flatId], references: [id])
  year          Int
  date          DateTime
  deviceId      Int      @map("device_id")
  device        Device   @relation(fields: [deviceId], references: [id])
  reading       Int?
  invoiceFileId Int?     @map("invoice_file_id")
  receiptFileId Int?     @map("receipt_file_id")

  @@map("data_records")
}
